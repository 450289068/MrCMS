@using MrCMS.Helpers
@model MrCMS.Entities.Documents.Web.Webpage
<div style="position: fixed; top: 0; width: 100%">
    <iframe src="/Admin/InPageAdmin/InPageEditorPage/@Model.Id" height="40" width="100%" frameborder="0" ></iframe>
</div>

<link href="@Url.Content("~/Areas/Admin/Content/Styles/front-end-editing.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Areas/Admin/Content/Editors/fancybox/jquery.fancybox-1.3.4.css")" rel="stylesheet" type="text/css" />
   
<script src="@Url.Content("~/Areas/Admin/Content/Editors/ckeditor/ckeditor.js")"> </script>
<script src="@Url.Content("~/Areas/Admin/Content/Scripts/custom/jquery.mrcms-mediaselector.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Content/Editors/fancybox/jquery.easing-1.3.pack.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Content/Editors/fancybox/jquery.mousewheel-3.0.4.pack.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Areas/Admin/Content/Editors/fancybox/jquery.fancybox-1.3.4.pack.js")"></script>

<script>
    $(document).on('click', '[data-toggle="fb-modal"]', function () {
        var clone = $(this).clone();
        clone.attr('data-toggle', '');
        clone.hide();
        clone.fancybox({
            type: 'iframe',
            padding: 0,
            height: 0,
            'onComplete': function () {
                $('#fancybox-frame').load(function () {
                    $(this).contents().find('form').attr('target', '_parent').css('margin', '0');
                    var documentWidth = $('html').width() - 200;
                    if (documentWidth > 1000)
                        documentWidth = 1000;

                    $('#fancybox-content, #fancybox-wrap, #fancybox-frame').height($(top.window).height() - 100);
                    $('#fancybox-content, #fancybox-wrap, #fancybox-frame').width(documentWidth);
                    $.fancybox.center();
                });
            }
        }).click().remove();
        return false;
    });

    $().ready(function() {
        
        $(document).on("click", "[data-action=post-link]", (function (e) {
            e.preventDefault();
            var self = $(this);
            var url = self.attr('href') || self.data('link');
            if (url != null) {
                postToUrl(url, {});
            }
        }));

        function postToUrl(path, params, method) {
            method = method || "post"; // Set method to post by default, if not specified.

            // The rest of this code assumes you are not using a library.
            // It can be made less wordy if you use one.
            var form = document.createElement("form");
            form.setAttribute("method", method);
            form.setAttribute("action", path);

            for (var key in params) {
                var hiddenField = document.createElement("input");
                hiddenField.setAttribute("type", "hidden");
                hiddenField.setAttribute("name", params[key].name);
                hiddenField.setAttribute("value", params[key].value);

                form.appendChild(hiddenField);
            }

            document.body.appendChild(form);
            form.submit();
        }

    });
    
</script>
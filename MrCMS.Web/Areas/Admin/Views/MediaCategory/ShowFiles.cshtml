@using System.Activities.Statements
@using System.Collections.Generic
@using System.Drawing
@using System.Linq
@using MrCMS.Entities.Documents.Media
@using MrCMS.Helpers
@using MrCMS.Paging
@{
    var files = ViewData["files"] as IList<MediaFile> ?? new List<MediaFile>();
}
@model MediaCategory


<span class="btn-group" id="file-tools">
    <button id="cut-files" class="btn btn-default" disabled>Cut</button>
    <button id="paste-files" class="btn btn-default" disabled>Paste</button>
    <button id="delete-files" class="btn btn-default" disabled>Delete</button>
    <button id="clear-files" class="btn btn-default" >Clear</button>
</span>
<div class="clearfix"></div>
<div id="file-list" data-file-list="true" data-category-id="@(Model==null ? (int?)null : Model.Id)">
    @if (files.Any())
    {
        foreach (var file in files.OrderBy(x => x.DisplayOrder))
        {
            <div class="file" data-file="@file.Id" data-fileurl="@Url.Action("Edit", "File", new { Id = file.Id })">
                <div class="file-preview">
                    <a title="@file.FileName">
                        @if (file.IsImage)
                        {
                            @Html.RenderImage(file.FileUrl, new Size(100, 100))
                        }
                        else
                        {
                            <i class="glyphicon glyphicon-file"> </i>
                        }
                    </a>
                </div>
                <div class="file-link">
                    @*<div class="select-file">
                            @Html.CheckBox("selected-files", false, new { data_file_id = file.Id, @class = "checkbox-inline" })
                        </div>*@
                    <div class="file-link-name">
                        @Html.Link(file.FileName, file.FileUrl)
                    </div>
                </div>
            </div>
        }
        <div class="clearfix"> </div>
    }
    else
    {
        <p>There are no files here yet - why not upload some?</p>
    }

</div>

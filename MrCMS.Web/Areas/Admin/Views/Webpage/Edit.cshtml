@using MrCMS.Entities.Documents.Web
@model Webpage
@{
    ViewBag.Title = "Edit | " + Model.Name;
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}
<link href="@Url.Content("~/Areas/Admin/Content/Styles/jquery.formbuilder.css")" rel="stylesheet" type="text/css" />

@using (Html.BeginForm("Edit", "Webpage", FormMethod.Post, new { id = "edit-document" }))
{
    
    @Html.ValidationSummary()

    <div class="row-fluid">
        <div class="span1">
            <div class="btn-group">
                <button class="btn dropdown-toggle" data-toggle="dropdown">
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li>
                        @Html.ActionLink("Set parent", "SetParent", "Webpage", new { Model.Id }, new { data_toggle = "fb-modal" })
                    </li>
                    <li>
                        @Html.ActionLink("Add a child page", "Add", new { Model.Id })
                    </li>
                </ul>
            </div>
        </div>
        <div class="span11">
            <div class="btn-group display-inline pull-right">
                @Html.EditorFor(x => x.PublishOn)
                @(Model.PublishOn == null
                      ? Html.ActionLink("Publish", "PublishNow", new { id = Model.Id }, new { @class = "btn btn-warning", id = "publish-status-change" })
                      : Html.ActionLink("Unpublish", "Unpublish", new { id = Model.Id }, new { @class = "btn btn-success", id = "publish-status-change" }))
                @Html.ValidationMessageFor(x => x.PublishOn)

                <a href="/@Model.LiveUrlSegment" class="btn">View</a>
                @if (Model.CanDelete)
                {
                    <a href="@Url.Action("Delete", "Webpage", new { id = Model.Id })" class="btn btn-danger" data-toggle="fb-modal">Delete</a>
                }
                <button class="btn btn-primary">Save</button>
            </div>
            <div class="display-inline pull-right" style="margin-top: 5px;">Publish on &nbsp; </div>
        </div>
    </div>

                Html.RenderPartial(Convert.ToString(ViewData["EditView"]));

}

<hr />
